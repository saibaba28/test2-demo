# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- master

pool:
  vmImage: ubuntu-latest

stages: 
- stage: BUILD_STAGE
  jobs:
  - job: demo
    steps:
      - bash: echo "Stage build"
- stage: RELEASE_C
  dependsOn: BUILD_STAGE
  variables:
  - name: var
    value: True
  #  value: $[in(Succeeded(BUILD_STAGE), 'True')]
  #  ${{ if eq('Succeeded', 'Succeeded') }}: 
    # ${{ if eq('Succeeded(BUILD_STAGE)', 'True') }}:
  jobs:
  - job: test_0C
    condition: in(dependencies.BUILD_STAGE.result, 'Succeeded')
    steps:
     - task: Bash@3
       inputs:
        targetType: 'inline'
        script: | 
         if [ "$(var)" = "True" ]; then
          echo $(var)
          exit 1
          fi 
          echo $(var)
          echo "no exit :)"
  - job: test_02
    steps:
     - bash: echo "Stage BD"  
- stage: RELEASE_D
  jobs:
  - job: test_0D
    steps:
     - bash: echo "Stage D"  
    


